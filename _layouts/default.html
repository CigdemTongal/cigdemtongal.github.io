<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>{{ page.title }}</title>

<script src="https://unpkg.com/pagedjs/dist/paged.polyfill.js"></script>

<style>
/* ======================================================
   SCREEN CANVAS â€” MUST TARGET html, NOT body
   ====================================================== */
html {
  background: #007ea7;
}

/* Paged.js forces body white â€” accept it */
body {
  margin: 0;
}

/* ======================================================
   FIXED UI OVERLAY (SAFE FROM PAGED.JS)
   ====================================================== */
.ui {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 56px;
  background: linear-gradient(90deg, #ff3e41, #ff8a43);
  color: white;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 1.25rem;
  z-index: 9999;
  box-shadow: 0 6px 18px rgba(0,0,0,0.3);
}

.ui button {
  background: rgba(255,255,255,0.2);
  border: none;
  color: white;
  padding: 6px 12px;
  border-radius: 999px;
  cursor: pointer;
}

/* ======================================================
   PAGED.JS PAGES CONTAINER (THIS IS THE KEY)
   ====================================================== */
.pagedjs_pages {
  padding-top: 80px;   /* push pages below UI */
  padding-bottom: 3rem;
  background: transparent;
}

/* ======================================================
   PAGE PREVIEW (SCREEN ONLY)
   ====================================================== */
.pagedjs_page {
  background: white;
  margin: 2rem auto;
  box-shadow: 0 16px 40px rgba(0,0,0,0.35);
  border-radius: 4px;
}

.pagedjs_pagebox {
  background: white;
}

/* ======================================================
   PRINT RULES (PAGED.JS USES THESE)
   ====================================================== */
@page {
  size: A4;
  margin: 2.5cm;
}

@media print {
  html {
    background: white;
  }

  .ui {
    display: none !important;
  }

  .pagedjs_pages {
    padding: 0;
  }

  .pagedjs_page {
    margin: 0;
    box-shadow: none;
    border-radius: 0;
  }
}
</style>
</head>

<body>

<!-- FIXED UI (OUTSIDE DOCUMENT FLOW) -->
<div class="ui">
  <strong>ðŸ“„ Paged Preview</strong>
  <div>
    <span id="counter">Pages: â€¦</span>
    <button onclick="window.print()">Print</button>
  </div>
</div>

<!-- DOCUMENT CONTENT -->
{{ content }}

<script>
/* ======================================================
   PAGED.JS LIFECYCLE HOOK â€” SAFE
   ====================================================== */
class Counter extends Paged.Handler {
  afterRendered(pages) {
    const el = document.getElementById("counter");
    if (el) el.textContent = "Pages: " + pages.length;
  }
}
Paged.registerHandlers(Counter);
</script>

</body>
</html>
