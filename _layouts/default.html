<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>{{ page.title }}</title>

  <!-- Paged.js -->
  <script src="https://unpkg.com/pagedjs/dist/paged.polyfill.js"></script>

  <style>
    /* ======================================================
       COLOR PALETTE
       ====================================================== */
    :root {
      --red: #ff3e41;
      --orange: #ff8a43;
      --yellow: #ffeb7f;
      --mint: #00c9a7;
      --blue: #007ea7;
      --bg: #f3f3f3;
    }

    /* ======================================================
       SCREEN CANVAS
       ====================================================== */
    body {
      margin: 0;
      background: var(--bg);
      font-family: Georgia, "Times New Roman", serif;
    }

    /* ======================================================
       SCREEN UI CHROME (NOT PART OF DOCUMENT)
       ====================================================== */
    .ui-header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 56px;
      background: linear-gradient(90deg, var(--blue), var(--mint));
      color: white;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 1.25rem;
      box-shadow: 0 4px 16px rgba(0,0,0,0.25);
      z-index: 1000;
    }

    .ui-title {
      font-size: 16px;
      font-weight: 600;
    }

    .ui-controls {
      display: flex;
      gap: 0.5rem;
      align-items: center;
    }

    .ui-btn {
      background: rgba(255,255,255,0.2);
      border: none;
      color: white;
      padding: 6px 12px;
      border-radius: 999px;
      font-size: 13px;
      cursor: pointer;
    }

    .ui-btn:hover {
      background: rgba(255,255,255,0.35);
    }

    .page-counter {
      font-size: 13px;
      opacity: 0.9;
    }

    /* Push pages below header */
    .pagedjs_pages {
      padding-top: 80px;
    }

    /* ======================================================
       PAGED.JS PAGE PREVIEW
       ====================================================== */
    .pagedjs_page {
      background: white;
      margin: 2rem auto;
      box-shadow: 0 14px 36px rgba(0,0,0,0.3);
      border-radius: 4px;
    }

    .pagedjs_pagebox {
      background: white;
    }

    /* ======================================================
       PRINT RULES (SPEC-ALIGNED)
       ====================================================== */
    @page {
      size: A4;
      margin: 2.5cm;
    }

    @media print {
      body {
        background: white;
      }

      .ui-header {
        display: none !important;
      }

      .pagedjs_page {
        margin: 0;
        box-shadow: none;
        border-radius: 0;
      }

      .pagedjs_pages {
        padding-top: 0;
      }
    }
  </style>
</head>

<body>

  <!-- ======================================================
       SCREEN-ONLY UI CHROME
       ====================================================== -->
  <div class="ui-header">
    <div class="ui-title">
      üìÑ Document Preview
    </div>
    <div class="ui-controls">
      <div class="page-counter" id="pageCounter">
        Pages: ‚Ä¶
      </div>
      <button class="ui-btn" onclick="window.print()">Print</button>
      <button class="ui-btn" onclick="showInfo()">Info</button>
    </div>
  </div>

  <!-- ======================================================
       DOCUMENT CONTENT (PAGED.JS OWNS THIS)
       ====================================================== -->
  {{ content }}

  <!-- ======================================================
       INFO MODAL (SCREEN ONLY)
       ====================================================== -->
  <div id="infoModal" style="
    display:none;
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.45);
    z-index:2000;
    align-items:center;
    justify-content:center;
  ">
    <div style="
      background:white;
      padding:1.75rem 2rem;
      max-width:420px;
      border-radius:12px;
      box-shadow:0 20px 50px rgba(0,0,0,0.35);
      border-top:6px solid var(--orange);
    ">
      <h3 style="margin-top:0;color:var(--orange);">
        Best PDF Results ‚ú®
      </h3>
      <p>
        For perfect output, use <strong>Google Chrome</strong>.
      </p>
      <p style="font-size:14px;line-height:1.6;">
        ‚Ä¢ Paper size: <strong>A4</strong><br>
        ‚Ä¢ Scale: <strong>100%</strong><br>
        ‚Ä¢ Margins: <strong>None</strong><br>
        ‚Ä¢ Background graphics: <strong>On</strong><br>
        ‚Ä¢ Headers & footers: <strong>Off</strong>
      </p>
      <p style="font-size:13px;opacity:0.8;">
        Paged.js already paginated the document ‚Äî don‚Äôt let the browser ‚Äúhelp‚Äù.
      </p>
      <button class="ui-btn" style="background:var(--mint);color:#003;" onclick="hideInfo()">
        Got it
      </button>
    </div>
  </div>

  <!-- ======================================================
       SCREEN-ONLY JS (SAFE WITH PAGED.JS)
       ====================================================== -->
  <script>
    function showInfo() {
      document.getElementById("infoModal").style.display = "flex";
    }

    function hideInfo() {
      document.getElementById("infoModal").style.display = "none";
    }

    // Paged.js hook: update page counter after render
    class PageCounter extends Paged.Handler {
      afterRendered(pages) {
        const el = document.getElementById("pageCounter");
        if (el) el.textContent = "Pages: " + pages.length;
      }
    }
    Paged.registerHandlers(PageCounter);
  </script>

</body>
</html>
